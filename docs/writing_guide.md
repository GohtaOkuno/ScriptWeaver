# ScriptWeaver TRPGシナリオ記述ガイド

## はじめに
このガイドは、ScriptWeaverで美しいHTML出力を得るための記述方法を説明します。

---

## 1. 基本的な記述ルール

### 1.1 ファイル形式
- **対応形式**: `.txt` または `.docx`
- **推奨エンコーディング**: UTF-8
- **対応エンコーディング**: Shift-JIS, CP932, EUC-JP, ISO-2022-JP

### 1.2 基本構造
```
# シナリオタイトル

## 概要
シナリオの概要を記述

## 背景
詳細な背景設定

2. ハンドアウト
2-1. PC1用ハンドアウト
2-2. PC2用ハンドアウト

3. 情報
3-1. 基本情報
3-2. 追加情報
```

---

## 2. 見出しの記述方法

### 2.1 Markdown形式（推奨）
```
# 最上位タイトル
## 章・大項目
### セクション
#### サブセクション
##### 詳細項目
###### 最小項目
```

### 2.2 番号付き形式
```
1. メイン項目
2. 別のメイン項目
2-1. サブ項目
2-1-1. 詳細項目
```

**ポイント:**
- スペースの有無は問いません: `1.タイトル` も `1. タイトル` も有効
- 階層は3レベルまで推奨

---

## 3. CoC6版専用記法

### 3.1 技能判定
```
【目星】判定に成功すると...
【聞き耳-20】で難易度の高い判定
【機械修理orコンピュータ】どちらかの技能で判定
```

### 3.2 アイテム・文書
```
『古い日記』を発見する
『呪われた短剣』を装備している
```

### 3.3 ダイス表記
```
1d6のダメージを受ける
2d10+5で判定
1d100-30の修正判定
```

### 3.4 SAN減少
```
【SANc1/1d4】の減少
【SANc0/1d6+1】成功でも減少
```

---

## 4. 会話・演出の記述

### 4.1 会話文
```
NPCは「助けてください！」と叫ぶ。
「何かがおかしい」と探索者は感じる。
```

### 4.2 演出の分離
セクション区切りを使用して場面を分けます:
```
==========================================

新しい場面や重要な転換点

------------------------------------------

小さな区切りや時間の経過
```

---

## 5. 表の作成方法

### 5.1 基本的な表
```
時刻   | 出来事
-------|---------------------------
14:00  | PCたちが町に到着
17:30  | 奇妙な音が聞こえる
19:00  | 事件が発生
```

### 5.2 情報整理表
```
成功条件     | 報酬        | 失敗時のペナルティ
-------------|-------------|------------------
全員生還     | +1d3 SAN   | なし
真相解明     | +1d6 SAN   | -1 SAN
犯人逮捕     | +2 SAN     | 事件継続
```

**ポイント:**
- パイプ（|）で列を区切る
- ヘッダー行の下に区切り線（---）を配置
- 区切り線がなくても2行以上あれば表として認識

---

## 6. リスト記法

### 6.1 箇条書き
```
・ 重要な手がかり1
・ 重要な手がかり2  
・ 重要な手がかり3
```

### 6.2 定義リスト
```
◆ 重要語句：その説明や定義
◆ 専門用語：詳細な解説内容
◆ 固有名詞：背景や関連情報
```

---

## 7. NPCの記述方法

### 7.1 基本ステータス
```
田中一郎 (STR 12 CON 14 SIZ 10 INT 15 POW 13 DEX 11 HP 12 MP 13)
技能: 〈説得〉70 〈信用〉60 〈隠れる〉40
装備: 護身用ナイフ(1d4+DB) 携帯電話
```

### 7.2 詳細なNPC記述
```
佐藤花子 (STR 9 CON 11 SIZ 8 INT 16 POW 14 DEX 13 HP 10 MP 14) 
図書館司書、28歳。温厚で知識豊富だが、最近不安そうな様子。
技能: 〈図書館〉90 〈目星〉60 〈心理学〉50
装備: 古い鍵束 謎の手紙
攻撃: 噛みつき 25% ダメージ1d3（錯乱時のみ）
```

---

## 8. よくある間違いと対策

### 8.1 技能名の誤記
```
❌ 【目だま】【耳きき】
✅ 【目星】【聞き耳】
```

### 8.2 ダイス記法の間違い
```
❌ 1D6 1dice6 1ｄ6
✅ 1d6 2d10 1d100
```

### 8.3 SAN記法の間違い
```
❌ SAN1/1d4 san1/1d4
✅ SANc1/1d4 SANc0/1
```

### 8.4 表の作成ミス
```
❌ 項目1,項目2,項目3     ← カンマ区切りは認識されない
✅ 項目1 | 項目2 | 項目3  ← パイプ区切りを使用
```

---

## 9. スタイリングのヒント

### 9.1 見出しの使い分け
- `#` : シナリオタイトルのみ
- `##` : 大きな章（概要、本編、結末など）
- `###` : セクション（場所、状況、判定など）
- `1.` : 番号管理が必要な項目（ハンドアウト、情報など）

### 9.2 情報の階層化
```
## 3. 調査フェーズ

### 3-1. 図書館での調査
【図書館】判定で以下の情報を入手：

・ 基本情報（難易度：通常）
・ 追加情報（難易度：困難）
・ 重要情報（難易度：極限）

◆ 基本情報：一般的に知られている事実
◆ 追加情報：専門的な知識が必要
◆ 重要情報：事件の核心に関わる情報
```

---

## 10. 推奨テンプレート

### 10.1 基本構成
```
# シナリオタイトル

## 概要
- 推奨人数：
- プレイ時間：
- 難易度：

## 導入

## ハンドアウト
1. PC1用
2. PC2用

## 本編
### 第1章：
### 第2章：

## 結末
### 成功時
### 失敗時

## NPC情報

## 補足資料
```

---

## 11. チェックリスト

変換前に以下を確認しましょう：

- [ ] ファイルエンコーディングは適切か
- [ ] 見出し階層は論理的か
- [ ] 技能名・アイテム名の記法は正しいか
- [ ] ダイス表記に誤りはないか
- [ ] 表の形式は適切か
- [ ] NPCステータスは完全か
- [ ] 全体の構成は読みやすいか

---

## 12. サンプルシナリオ

完全なサンプルは `samples/input/sample_scenario.txt` を参照してください。

このガイドに従って記述することで、ScriptWeaverは美しく読みやすいHTMLを生成します。